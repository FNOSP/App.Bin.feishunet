import{r as g,l as V,k as w,m as v,o as h,d as b,e as u,q as n,G as B,w as p,s as y,E as C,u as $,i as f,g as j,B as x,H as E,F as G,p as M,j as O,I as S,t as k,A as P}from"./index-CKS7iP9_.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as T}from"./copy-BL86XiUk.js";function U(){const e=g(""),o=g(!1);V(()=>{r()});function r(){w.post("/getClientName").then(d=>{e.value=d.name})}function s(){return new Promise((d,a)=>{w.post("/setClientName",{name:e.value}).then(_=>{d()})})}return{name:e,editName:s,dialog:o,GetName:r}}const A={class:"btns"},F={__name:"NameEdit",emits:["close"],setup(e,{emit:o}){const r=g(""),s=g(!0),d=o;V(()=>{a()});function a(){w.post("/getClientName").then(c=>{r.value=c.name,s.value=!1})}function _(){return new Promise((c,m)=>{w.put("/setClientName",{clientName:r.value}).then(i=>{c()})})}async function t(){if(r.value==""){C.error("修改后的名称不可为空");return}await _(),C.success("修改成功"),d("close")}function l(){d("close")}return(c,m)=>{const i=v("el-input"),N=v("el-button");return h(),b("div",null,[u("div",null,[n(i,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=K=>r.value=K),onKeyup:B(t,["enter"]),disabled:s.value},null,8,["modelValue","disabled"])]),u("div",A,[n(N,{type:"primary",onClick:t},{default:p(()=>[y("提交")]),_:1}),n(N,{type:"danger",onClick:l},{default:p(()=>[y("取消")]),_:1})])])}}},J=I(F,[["__scopeId","data-v-33c3219e"]]),L=e=>(M("data-v-a3d09b3d"),e=e(),O(),e),q={class:"flex admin-headers"},D=L(()=>u("div",null,null,-1)),H={class:"more flex"},R={__name:"header",setup(e){const o=$();function r(){o.updateList(1)}const{dialog:s}=U();return(d,a)=>{const _=v("el-dialog"),t=v("el-button");return h(),b(G,null,[n(_,{modelValue:f(s),"onUpdate:modelValue":a[1]||(a[1]=l=>E(s)?s.value=l:null),width:"300px",title:"修改本机名称"},{default:p(()=>[f(s)?(h(),j(J,{key:0,onClose:a[0]||(a[0]=l=>s.value=!1)})):x("",!0)]),_:1},8,["modelValue"]),u("div",q,[D,u("div",H,[u("div",null,[n(t,{onClick:a[2]||(a[2]=l=>s.value=!0),type:"danger"},{default:p(()=>[y("修改本机名称")]),_:1})]),u("div",null,[n(t,{onClick:r,type:"primary"},{default:p(()=>[y("刷新")]),_:1})])])])],64)}}},z=I(R,[["__scopeId","data-v-a3d09b3d"]]),Q=()=>{const e=$(),o=g(1),r=g(!0),s=S(()=>e.list.length),d=S(()=>{let a=JSON.parse(JSON.stringify(e.list));a.forEach(t=>{let l=t.ip.split("."),c="";l.map(m=>{c+=m}),t.sortKey=c}),a.sort(W),a.forEach(t=>{delete t.sortKey});let _=[];for(let t=(o.value-1)*10;t<(o.value*10>e.list.length?e.list.length:o.value*10);t++)_.push(a[t]);return _});return{page:o,list:d,total:s,hidden:r}};function W(e,o){return e.sortKey-o.sortKey}const X={class:"back"},Y={class:"user_name"},Z=["onClick"],ee={key:0},te={key:0},oe={class:"pagetion"},ae={__name:"main",setup(e){const{page:o,list:r,total:s,hidden:d}=Q(),a=$();return V(()=>{a.link_state=="false"&&C.info("连接未开始")}),(_,t)=>{const l=v("el-table-column"),c=v("el-table"),m=v("el-pagination");return h(),b("div",X,[n(z),n(c,{data:f(r),"header-cell-style":{color:"#333333 !important",backgroundColor:"rgb(244, 247, 254)"}},{default:p(()=>[n(l,{label:"名称",width:"220"},{default:p(i=>[u("div",Y,k(i.row.name),1)]),_:1}),n(l,{prop:"ip",label:"组网ip",width:"120"},{default:p(i=>[u("a",{href:"",onClick:P(N=>f(T)(i.row.ip),["prevent"]),class:"ipCopy"},k(i.row.ip),9,Z)]),_:1}),n(l,{prop:"OsName",label:"系统类型"}),n(l,{prop:"configAddTime",label:"创建时间",width:"200"}),n(l,{prop:"status",label:"状态",width:"120"}),n(l,{prop:"mode",label:"模式",width:"60"}),n(l,{label:"延迟",width:"80"},{default:p(i=>[i.row.status=="已连接"?(h(),b("div",ee,[y(k(i.row.rtt),1),i.row.rtt!=="未知"?(h(),b("span",te,"ms")):x("",!0)])):x("",!0)]),_:1})]),_:1},8,["data","header-cell-style"]),u("div",oe,[n(m,{background:"",layout:"prev, pager, next","current-page":f(o),"onUpdate:currentPage":t[0]||(t[0]=i=>E(o)?o.value=i:null),total:f(s),"hide-on-single-page":f(d)},null,8,["current-page","total","hide-on-single-page"])])])}}},re=I(ae,[["__scopeId","data-v-d3d33ee3"]]);export{re as default};
