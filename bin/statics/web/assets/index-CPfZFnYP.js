import{r as p,l as T,o as c,d as u,y as N,g as $,q as h,w as k,i as f,z as D,e as s,F as V,f as A,A as b,t as x,B as L,T as F,C as q,u as g,s as C,p as w,j as S,b as z,D as R,m as B}from"./index-D3CIYbn5.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j=[{lable:"删除"}];function P(e){const n=p(0),l=p(0),i=p(!1);function d(t){t.preventDefault(),t.stopPropagation(),n.value=t.clientX,l.value=t.clientY,i.value=!0}function r(){i.value=!1}return T(()=>{const t=e.value;try{t.addEventListener("contextmenu",d),window.addEventListener("click",r,!0),t.addEventListener("contextmenu",r,!0)}catch{}}),{x:n,y:l,visible:i}}const H=["onClick"],O={__name:"menu",emits:["select"],setup(e,{emit:n}){const l=n,i=p(),{x:d,y:r,visible:t}=P(i);function o(a){t.value=!1,l("select",a)}function _(a){a.style.height=0}function v(a){a.style.height="auto";const E=a.clientHeight;a.style.height=0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.style.height=E+"px",a.style.transition="0.5s"})})}function m(a){a.style.transition="none"}return(a,E)=>(c(),u("div",{ref_key:"contain",ref:i},[N(a.$slots,"item",{},void 0,!0),(c(),$(q,{to:"body"},[h(F,{onBeforeEnter:_,onEnter:v,onAfterEnter:m},{default:k(()=>[f(t)?(c(),u("div",{key:0,class:"menu context-menu",style:D({left:f(d)+"px",top:f(r)+"px"})},[s("ul",null,[(c(!0),u(V,null,A(f(j),(I,M)=>(c(),u("a",{href:"",key:M,onClick:b(pe=>o(I),["prevent"])},[s("li",null,x(I.lable),1)],8,H))),128))])],4)):L("",!0)]),_:1})]))],512))}},U=y(O,[["__scopeId","data-v-41ab8197"]]),X=e=>(w("data-v-7a8f3ad7"),e=e(),S(),e),Y={class:"item flex"},G={class:"name"},J={key:0},K=X(()=>s("i",{class:"iconfont icon-shanchu deleteBtn"},null,-1)),Q=[K],W={__name:"collection",props:{data:{type:Object,default:{name:"",token:""}}},emits:["del"],setup(e,{emit:n}){const l=g(),i=n,d=e;async function r(){l.setToken(d.data.token)}function t(o){o.stopPropagation(),o.preventDefault(),i("del",d.data)}return(o,_)=>(c(),$(U,{onSelect:t},{item:k(()=>[s("a",{href:"",onClick:b(r,["prevent"])},[s("div",Y,[s("div",G,[e.data.areaName?(c(),u("span",J,x(e.data.areaName)+"-",1)):L("",!0),C(x(e.data.name),1)]),s("div",{onClick:b(t,["stop"])},Q)])])]),_:1}))}},Z=y(W,[["__scopeId","data-v-7a8f3ad7"]]),ee=e=>(w("data-v-41cf5c46"),e=e(),S(),e),te={class:"flex"},ne={class:"code-input"},se={key:0,class:"link-btn"},oe={key:1,class:"close"},ae=ee(()=>s("div",{class:"center"},"正在连接中...",-1)),ce={__name:"linkCode",setup(e){const n=g(),l=p(""),i=z();async function d(){n.setToken(l.value)}R(()=>n.link_state,t=>{t!=="false"&&t!=="linkpadding"&&i.push("/linkSuccess")});function r(){n.closeLink()}return(t,o)=>{const _=B("el-input"),v=B("el-button");return c(),u("form",{onSubmit:o[1]||(o[1]=(...m)=>t.submits&&t.submits(...m)),class:"code-contain"},[s("div",te,[s("div",ne,[h(_,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=m=>l.value=m),class:"input",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入识别码"},null,8,["modelValue"])]),f(n).link_state=="false"?(c(),u("div",se,[h(v,{onClick:d,class:"code-sub",color:"rgb(0,116,232)"},{default:k(()=>[C("链接")]),_:1})])):(c(),u("div",oe,[ae,h(v,{class:"code-sub linkout",color:"rgb(0,116,232)",onClick:r},{default:k(()=>[C("关闭连接")]),_:1})]))])],32)}}},le=y(ce,[["__scopeId","data-v-41cf5c46"]]),ie=e=>(w("data-v-f7fdb35d"),e=e(),S(),e),re={class:"link all"},de={class:"recently-link all flex"},ue=ie(()=>s("div",{class:"tip"},"最近链接",-1)),_e={class:"collections wrap"},fe={__name:"index",setup(e){const n=g(),l=p(!1);function i(){l.value=!1}function d(r){n.removeToken(r.token)}return T(()=>{n.tokenList()}),(r,t)=>(c(),u("div",{class:"contain back",onClick:i},[s("div",re,[h(le)]),s("div",de,[ue,s("div",_e,[(c(!0),u(V,null,A(f(n).tokens,(o,_)=>(c(),$(Z,{data:o,key:_,onDel:d},null,8,["data"]))),128))])])]))}},ve=y(fe,[["__scopeId","data-v-f7fdb35d"]]);export{ve as default};
